<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>About Vivian</title>
    <link>https://irainbowv.github.io/</link>
    <atom:link href="/rss2.html" rel="self" type="application/rss+xml"/>
    
    <description></description>
    <pubDate>Fri, 09 Aug 2019 07:44:26 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title></title>
      <link>https://irainbowv.github.io/2019/08/09/%E8%88%AA%E5%8A%A0%E5%AE%B6%E5%B1%85%E6%9C%8D%E5%8A%A1%EF%BC%88201907-201908%EF%BC%89/</link>
      <guid>https://irainbowv.github.io/2019/08/09/%E8%88%AA%E5%8A%A0%E5%AE%B6%E5%B1%85%E6%9C%8D%E5%8A%A1%EF%BC%88201907-201908%EF%BC%89/</guid>
      <pubDate>Fri, 09 Aug 2019 07:44:25 GMT</pubDate>
      <description>
      
        
        
          &lt;h1 id=&quot;航加家居服务（201907-201908）&quot;&gt;&lt;a href=&quot;#航加家居服务（201907-201908）&quot; class=&quot;headerlink&quot; title=&quot;航加家居服务（201907-201908）&quot;&gt;&lt;/a&gt;航加家居服务（201907-201908）&lt;/
        
      
      </description>
      
      <content:encoded><![CDATA[<h1 id="航加家居服务（201907-201908）"><a href="#航加家居服务（201907-201908）" class="headerlink" title="航加家居服务（201907-201908）"></a>航加家居服务（201907-201908）</h1><ul><li><p>项目：当前订单中的砍价订单模块，需要对所有已确认后的砍价订单，进行查看确定信息并生成确定订单图片。使用html2canvas插件可以通过指定DOM对象，将当前DOM对象生成canvas图片，最后将canvas图片转成base64编码，并赋值给a链接的herf属性，同时给a链接添加download属性可以进行当前指定内容的下载。</p></li><li><p>问题：在将DOM结构转化为canvas时，出现部分订单顶部留白的现象。</p></li><li><p>解决思路：根据插件打印的logger进行debug，找到源码中进行配置canvas的并渲染到页面中的的CanvasRenderer()方法，通过打印配置项并多次调试。确定在渲染时canvas标签的scrollY的值有一些误差，导致了这个问题。</p></li><li><p>解决方案：html2canvas 插件提供配置项进行配置scrollY，将scrollY的值全部指定为0。</p></li><li><p>代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> generatorImage() &#123;</span><br><span class="line">      html2canvas(<span class="keyword">this</span>.$refs.capture, &#123;</span><br><span class="line">        scrollY: <span class="number">0</span></span><br><span class="line">      &#125;).then(<span class="function"><span class="params">canvas</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> link = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>)</span><br><span class="line">        link.href = canvas.toDataURL()</span><br><span class="line">        link.setAttribute(<span class="string">'download'</span>, <span class="string">'确认单.png'</span>)</span><br><span class="line">        link.style.display = <span class="string">'none'</span></span><br><span class="line">        <span class="built_in">document</span>.body.appendChild(link)</span><br><span class="line">        link.click()</span><br><span class="line">      &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>项目：订单模块，通过查看详情在弹出的第一层模态框中可以查看当前订单的状态以及进行一些修改。点击进行修改状态和相关信息时弹出第二层模态框进行确认修改。当前订单修改后，第一层模态框和订单模块中的状态需要同步为修改后的状态。</p></li><li><p>问题：由于订单模块、模态框模块都是使用单独的组件完成的，组件解耦严重，导致数据状态同步出现问题。</p></li><li><p>解决思路：数据驱动视图，如果想要实现页面中视图发生改变，必然要将当前视图绑定的数据进行重新赋值，组件中已经有获取数据并且赋值的方法，需要在状态修改后通过第二层模态框进行子到父传值，告诉第一层模态框进行重新获取数据，第一层模态框再通过子到父传值，实现订单页面的数据重新获取。</p></li></ul>]]></content:encoded>
      
      <comments>https://irainbowv.github.io/2019/08/09/%E8%88%AA%E5%8A%A0%E5%AE%B6%E5%B1%85%E6%9C%8D%E5%8A%A1%EF%BC%88201907-201908%EF%BC%89/#disqus_thread</comments>
    </item>
    
  </channel>
</rss>
